---
show: step
version: 1.0 
enable_checker: true
---


# python_blender

## å¼€å§‹

- ä¸Šæ¬¡æ§åˆ¶äº†è§†è§’çš„å˜åŒ–
	- ä»¥ `æ‰€æœ‰`å¯¹è±¡ ä¸ºå…¨æ™¯ Frame `All`
	- ä»¥ `æ‰€é€‰`å¯¹è±¡ ä¸ºå…¨æ™¯ Frame `Selected`
	- è¿˜å¯ä»¥ æ‰‹åŠ¨æ”¹å˜

|é”®é¼ é…åˆ | æ“ä½œ| æ•ˆæœ |
| --- |--- |---|
|<kbd>é¼ æ ‡ä¸­é”®</kbd>| æ»šåŠ¨  | é•œå¤´æ¨æ‹‰ |
| <kbd> é¼ æ ‡ä¸­é”®</kbd>  |æŒ‰ä½æ‹–åŠ¨ | é•œå¤´æ—‹è½¬ |
| shift + <kbd> é¼ æ ‡ä¸­é”®</kbd> | ç‚¹å‡»æ‹–åŠ¨ | é•œå¤´å¹³ç§» |

- åé¢åŠ å…¥äº†éšæœºçš„å› ç´ 
	- ä¸€å­—é•¿è›‡
	- æ–¹é˜µ
	- ç«‹ä½“é­”æ–¹
	- åŠ å…¥äº†éšæœºæ€§
- æœ€ååªåšäº†
	- åœ†å½¢
	- èºæ—‹å½¢
- ç›®å‰ æ”¹çš„ éƒ½æ˜¯ä½ç½®(position)
- å¦‚ä½• ä¿®æ”¹ æ—‹è½¬(rotation)å‘¢ï¼ŸğŸ¤”

### æ„å»ºç¯å¢ƒ

- è¿˜æ˜¯åœ¨Code/b1.pyä¸­ä¿®æ”¹ä»£ç 

```
import bpy
bpy.ops.object.select_all(action="SELECT")
bpy.ops.object.delete()
for num in range(13):
    bpy.ops.mesh.primitive_monkey_add(size = 1)
    bpy.context.object.location = (0,num,0)
```

- ç„¶åè¿›å…¥blenderä¸­
	- åœ¨æ–‡æœ¬è°ƒæ¿ä¸­
	- Relaod
	- Run

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240523-1716456249162)

- å¾—åˆ°ä¸€æ’çŒ´å­
- æƒ³è®©çŒ´å­ä½å¤´ï¼Ÿ

### ä¿¯ä»°è½´

- è°ƒæ•´æ—‹è½¬ä¸­çš„ç¬¬0ä¸ªåˆ†é‡
	- rotation_euler[0] = 3.14 / 6

```
import bpy
bpy.ops.object.select_all(action="SELECT")
bpy.ops.object.delete()
for num in range(13):
    bpy.ops.mesh.primitive_monkey_add(size = 1)
    bpy.context.object.location = (0,num,0)
    bpy.context.object.rotation_euler[0] = 3.14 / 6
```

- 3.14/6 æ˜¯è§’åº¦åˆ¶
	- å¤§æ¦‚åˆ 3.14/6 / (2 * 3.14) * 360 
	- åˆ å¤§æ¦‚ 60 åº¦
- çŒ´å­åœ¨ çº¢è½´æ–¹å‘ä¸Šæ—‹è½¬60åº¦
	- ä½å¤´ 60åº¦

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240523-1716456462619)

- 0å·æ—‹è½¬è½´ ä¸º 
	- ä¿¯ä»°è½´
	- pitch
	- è´Ÿè´£ ä½å¤´æŠ¬å¤´
- ç°åœ¨å…¨éƒ½ä½å¤´è®¤é”™...

### æ¨ªæ»šè½´

- æˆ‘è¦ä»–ä»¬æŠ¬èµ·å¤´æ¥

```
import bpy
bpy.ops.object.select_all(action="SELECT")
bpy.ops.object.delete()
for num in range(13):
    bpy.ops.mesh.primitive_monkey_add(size = 1)
    bpy.context.object.location = (0,num,0)
    bpy.context.object.rotation_euler[0] = - 3.14 / 6
```

- å…¨éƒ½ä»°æœ›æ˜Ÿç©ºäº†

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240831-1725103216798)

- yè½´æ˜¯ä»€ä¹ˆæ–¹å‘å‘¢ï¼Ÿ

### yè½´

```
import bpy
bpy.ops.object.select_all(action="SELECT")
bpy.ops.object.delete()
for num in range(13):
    bpy.ops.mesh.primitive_monkey_add(size = 1)
    bpy.context.object.location = (0,num,0)
    bpy.context.object.rotation_euler[1] = 3.14 / 6
```

- çŒ´å­åœ¨ç»¿è½´æ–¹å‘ä¸Š æ—‹è½¬ 60åº¦
	- æ­ªå¤´ 60åº¦ 

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240523-1716456573827)

- 1å·æ—‹è½¬è½´ ä¸º 
	- æ¨ªæ»šè½´
	- bank
	- è´Ÿè´£ æ­ªå¤´

### èˆªå‘è½´

```
import bpy
bpy.ops.object.select_all(action="SELECT")
bpy.ops.object.delete()
for num in range(13):
    bpy.ops.mesh.primitive_monkey_add(size = 1)
    bpy.context.object.location = (0,num,0)
    bpy.context.object.rotation_euler[2] = 3.14 / 6
```

- çŒ´å­ åœ¨å‚ç›´äºçº¢ç»¿è½´å¹³é¢çš„ zè½´ä¸Šæ—‹è½¬ 60åº¦
	- è½¬å¤´ 60åº¦

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240523-1716456709737)

- 2å·åæ ‡è½´ ä¸º 
	- èˆªå‘è½´
	- heading
	- è´Ÿè´£è½¬å¤´

- æ¥ä¸€é¢ çŒ´å­å¢™

### åŸºç¡€å¢™é¢

```
import bpy

bpy.ops.object.select_all(action="SELECT")
bpy.ops.object.delete()
for x in range(10):
    for z in range(10):
        bpy.ops.mesh.primitive_monkey_add(size=1)
        bpy.context.object.location=(x,0,z)
```

- æ•ˆæœ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240523-1716457053165)

- åŠ ç‚¹éšæœºæ•ˆæœ

### éšæœºè½¬åŠ¨

```
import bpy
import random

bpy.ops.object.select_all(action="SELECT")
bpy.ops.object.delete()
for x in range(10):
    for z in range(10):
        r = random.random()
        bpy.ops.mesh.primitive_monkey_add(size=1)
        bpy.context.object.location=(x,0,z)
        bpy.context.object.rotation_euler[1] = r
```

- æ–¹å‘å•ä¸€

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240523-1716457252856)

- å°è¯•ä¿®æ”¹

### ä¿®æ”¹è§’åº¦

```
import bpy
import random

bpy.ops.object.select_all(action="SELECT")
bpy.ops.object.delete()
for x in range(10):
    for z in range(10):
        r = random.random()
        bpy.ops.mesh.primitive_monkey_add(size=1)
        bpy.context.object.location=(x,0,z)
        bpy.context.object.rotation_euler[1] = r-0.5
```

- æ•ˆæœ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240523-1716457346226)

- è¿™æœ‰ä»€ä¹ˆæ„ä¹‰å—ï¼Ÿ

### éšæœºçš„æ„ä¹‰

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/2027973/uid1190679-20250718-1752809838108) 

- æ ‘å† çš„å½¢æ€

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/2027973/uid1190679-20250718-1752809858259) 

```
# -*- coding: utf-8 -*-
# è¯—å¥: æ«çº¢æ˜ æ°´æ™šæ±Ÿç§‹ (æè´¨åˆ›å»ºä¿®æ­£ç‰ˆ)

import bpy
import math
import random

def clear_scene():
    if bpy.context.object and bpy.context.object.mode == 'EDIT':
        bpy.ops.object.mode_set(mode='OBJECT')
    bpy.ops.object.select_all(action='SELECT')
    bpy.ops.object.delete()
    for block in bpy.data.meshes:
        if block.users == 0: bpy.data.meshes.remove(block)
    for block in bpy.data.materials:
        if block.users == 0: bpy.data.materials.remove(block)

def create_principled_material(name, color):
    mat = bpy.data.materials.new(name=name)
    mat.use_nodes = True
    nodes = mat.node_tree.nodes; nodes.clear()
    output_node = nodes.new(type='ShaderNodeOutputMaterial')
    bsdf_node = nodes.new(type='ShaderNodeBsdfPrincipled')
    bsdf_node.inputs['Base Color'].default_value = color
    mat.node_tree.links.new(bsdf_node.outputs['BSDF'], output_node.inputs['Surface'])
    return mat

# --- 1. æ¸…ç†å¹¶è®¾ç½®åœºæ™¯ ---
clear_scene()
scene = bpy.context.scene
scene.render.engine = 'CYCLES'
scene.cycles.device = 'GPU'
scene.cycles.samples = 256
scene.render.fps = 30
scene.frame_start = 1
scene.frame_end = 4 * scene.render.fps
scene.render.filepath = f"//render/poem_01/frame_"

# --- 2. åˆ›å»ºç¯å¢ƒå’Œç¯å…‰ ---
world = scene.world
bpy.ops.object.light_add(type='SUN', location=(0, 0, 30))
sun = bpy.context.object
sun.data.energy = 2.0
sun.rotation_euler = (math.radians(30), math.radians(-30), 0)

# åˆ›å»ºç¨‹åºåŒ–çš„æ«æ ‘
maple_mat = create_principled_material("MapleLeafMaterial", (0.8, 0.1, 0.05, 1.0))
for i in range(5):
    x, y = -15 + i * 6 + random.uniform(-1,1), random.uniform(8, 12)
    bpy.ops.mesh.primitive_cylinder_add(radius=0.2, depth=4, location=(x, y, 2))
    for j in range(50):
        rand_x = x + random.uniform(-1.5, 1.5)
        rand_y = y + random.uniform(-1.5, 1.5)
        rand_z = 4 + random.uniform(-1.0, 1.5)
        bpy.ops.mesh.primitive_ico_sphere_add(radius=random.uniform(0.3, 0.5), location=(rand_x, rand_y, rand_z))
        leaf = bpy.context.object
        leaf.data.materials.append(maple_mat)

# --- 4. è®¾ç½®å’ŒåŠ¨ç”»åŒ–æ‘„åƒæœº ---
bpy.ops.object.empty_add(type='SPHERE', location=(0, 0, 3))
pivot = bpy.context.object; pivot.name = "CameraPivot"
bpy.ops.object.camera_add(location=(0, -20, 0), rotation=(math.radians(85), 0, 0))
camera = bpy.context.object; camera.parent = pivot
scene.camera = camera

pivot.location = (-10, -5, 4)
pivot.keyframe_insert(data_path="location", frame=scene.frame_start)
pivot.location = (10, -5, 4)
pivot.keyframe_insert(data_path="location", frame=scene.frame_end)



```


### æ€»ç»“ ğŸ¤”
- è¿™æ¬¡ ç ”ç©¶äº† æ—‹è½¬å‡½æ•° 
	- rotation_euler æ—‹è½¬

- <span style="color:red">x</span><span style="color:green">y</span><span style="color:blue">z</span> ä¸‰ä¸ªè½´å‘çš„æ—‹è½¬å€¼æ„æˆä¸€ä¸ªåˆ—è¡¨
	- rotation_euler[<span style="color:red">0</span>] æ˜¯ <span style="color:red">x</span>è½´
	- rotation_euler[<span style="color:green">1</span>] æ˜¯ <span style="color:green">y</span>è½´
	- rotation_euler[<span style="color:blue">2</span>] æ˜¯ <span style="color:blue">z</span>è½´
- æˆ‘æƒ³åˆ¶ä½œä¸€ä¸ª+å·

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240831-1725104094090)

- åº”è¯¥å¦‚ä½•åšå‘¢ï¼ŸğŸ¤”
- æˆ‘ä»¬ä¸‹æ¬¡å†è¯´ï¼ğŸ‘‹
