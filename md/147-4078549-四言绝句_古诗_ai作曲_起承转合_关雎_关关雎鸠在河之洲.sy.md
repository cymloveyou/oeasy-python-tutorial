---
show: step
version: 1.0
enable_checker: true
---

# åˆ—è¡¨ - åˆ‡ç‰‡ - slice - æ­¥é•¿ - step

## å›å¿†

- ä¸Šæ¬¡æˆ‘ä»¬ç»™ã€Šå¼¹æ­Œã€‹è°±äº†æ›²

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/4078549/uid1190679-20250517-1747447892634) 

- äºŒè¨€ çš„ æ­Œæ›² ç°åœ¨å¾ˆå°‘äº†
	- æ˜†æ›²çš„é¢˜ç›® ä¸€èˆ¬è¿˜æ˜¯ äºŒè¨€çš„
	- ä»¥å æ­Œæ›²ä¼šå¦‚ä½• å˜åŒ–å‘¢ï¼ŸğŸ¤”

### äºŒå˜å››

- ç¡•é¼ ç¡•é¼  æ— é£Ÿæˆ‘é»
- ä¸‰å²è´¯å¥³ï¼Œè«æˆ‘è‚¯é¡¾
- é€å°†å»å¥³ é€‚å½¼ä¹åœŸ
- ä¹åœŸä¹åœŸï¼Œçˆ°å¾—æˆ‘æ‰€
- è¡¨è¾¾äº†å¥´éš¶å¯¹å‰¥å‰Šè€…çš„æ„¤æ¨å’Œå¯¹ç†æƒ³ä¹åœŸçš„å‘å¾€

### å››è¨€ç»å¥

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/4078549/uid1190679-20250517-1747449212377) 

- æƒ³ç»™è¿™ä¸ª é…ä¹

### æé—®

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/4078549/uid1190679-20250517-1747449565003) 

```
import mido
from mido import Message, MidiFile, MidiTrack
from mido.midifiles import midifiles

# å®šä¹‰æ¯ä¸ªå­—å¯¹åº”çš„éŸ³ç¬¦ï¼ˆä»¥Cå¤§è°ƒäº”å£°éŸ³é˜¶ä¸ºä¾‹ï¼Œä½“ç°èµ·æ‰¿è½¬åˆï¼‰
# ç¬¬ä¸€å¥ï¼šå¹³ç¨³å¼€å§‹
phrase1_notes = ['C4', 'D4', 'E4', 'D4']
# ç¬¬äºŒå¥ï¼šæ‰¿æ¥å¹¶ç¨å¾®æ¨è¿›
phrase2_notes = ['D4', 'E4', 'G4', 'A4']
# ç¬¬ä¸‰å¥ï¼šè½¬æŠ˜ï¼Œæƒ…ç»ªæœ‰æ‰€æå‡
phrase3_notes = ['G4', 'A4', 'C5', 'D5']
# ç¬¬å››å¥ï¼šå›å½’ä¸æ”¶æŸ
phrase4_notes = ['E4', 'D4', 'C4', 'C4']

# åˆ›å»ºMIDIæ–‡ä»¶å’ŒéŸ³è½¨
mid = MidiFile()
track = MidiTrack()
mid.tracks.append(track)

# è®¾ç½®é€Ÿåº¦ï¼ˆå¾®ç§’/æ‹ï¼‰
tempo_value = mido.bpm2tempo(120)  # è¿™é‡Œè®¾ç½®ä¸º120 BPM
track.append(mido.MetaMessage('set_tempo', tempo=tempo_value))

# å‡½æ•°ï¼šå°†éŸ³ç¬¦æ·»åŠ åˆ°éŸ³è½¨
# åœ¨æ–‡ä»¶å¼€å¤´æ·»åŠ éŸ³ç¬¦å­—å…¸ï¼ˆCå¤§è°ƒäº”å£°éŸ³é˜¶ï¼‰
NOTE_MAP = {
    'C4': 60,  # å®«
    'D4': 62,  # å•†
    'E4': 64,  # è§’
    'G4': 67,  # å¾µ
    'A4': 69,  # ç¾½
    'C5': 72,  # é«˜å…«åº¦å®«
    'D5': 74   # æ–°å¢D5æ˜ å°„
}

# ä¿®æ”¹åçš„add_phrase_to_trackå‡½æ•°
def add_phrase_to_track(notes):
    for n in notes:
        midi_note = NOTE_MAP[n]  # é€šè¿‡å­—å…¸è·å–MIDIç¼–å·
        track.append(Message('note_on', note=midi_note, velocity=64, time=0))
        track.append(Message('note_off', note=midi_note, velocity=64, time=480))

# åŸä»£ç ä¸­çš„phraseå®šä¹‰éœ€è¦ä¸å­—å…¸é”®åŒ¹é…ï¼Œä¾‹å¦‚ï¼š
# æ·»åŠ å››å¥è¯—å¯¹åº”çš„éŸ³ç¬¦åˆ°éŸ³è½¨
add_phrase_to_track(phrase1_notes)
add_phrase_to_track(phrase2_notes)
add_phrase_to_track(phrase3_notes)
add_phrase_to_track(phrase4_notes)

# ä¿å­˜MIDIæ–‡ä»¶
mid.save('guanju.mid')
```

### æ•ˆæœ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/4078549/uid1190679-20250517-1747450313953) 

- å¡«ä¸Šè¯ å¬å¬

### å¡«è¯

```
å…³å…³é›é¸ åœ¨æ²³ä¹‹æ´²çªˆçª•æ·‘å¥³å›å­å¥½é€‘
```

- å¡«ä¸Šå¬å¬

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/4078549/uid1190679-20250517-1747450893201) 

- ä¸ºä»€ä¹ˆè¿™ä¹ˆå¤šå››ä¸ªå­—çš„æ­Œæ›²å‘¢ï¼Ÿï¼Ÿ

### æé—®

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/4078549/uid1190679-20250523-1747957916444) 

### å”å°§

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/4078549/uid1190679-20250525-1748119502406) 

- æƒ…æ„Ÿæœ´ç´ çœŸæŒš

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/4078549/uid1190679-20250525-1748121052803) 

- èˆœå¸å‘¢ï¼Ÿ

### è™èˆœ

- æ­Œé¢‚èˆœå¸çš„æ­Œæ›²å¾ˆå¤š

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20250525-1748121515448)

- è€Œä¸”èˆœå¸æœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªéŸ³ä¹å®¶

### éŸ¶ä¹

- æµå— ä»Šå¤©è¿˜æœ‰ èˆœæ‰“çš„äº• 
	- å—å·¡åˆ°äº†å¹¿ä¸œéŸ¶å…³ åšäº†éŸ¶ä¹
	- å­”å­å¬äº†ä¹‹å ä¸‰ä¸ªæœˆä¸çŸ¥é“è‚‰å‘³
- å°§èˆœ ä¹‹å å°±æ˜¯ å¤§ç¦¹


![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/4078549/uid1190679-20250525-1748123390128) 

- æœ‰ä»€ä¹ˆ å¤§ç¦¹æ²»æ°´çš„æ­Œæ›²å—ï¼Ÿ

### å€™äººå…®çŒ—

- å¤§ç¦¹æ²»æ°´ ä¸‰è¿‡å®¶é—¨ 
	- å¦»å­ æ¶‚å±±æ°

- ã€Šå€™äººæ­Œã€‹
	- åªæœ‰å€™äººå…®çŒ—(hÃ²u rÃ©n xÄ« yÄ«) ä¸€å¥æ­Œè¯

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/4078549/uid1190679-20250525-1748132296158) 

### é™ˆèƒœå´å¹¿

- ç‹ä¾¯å°†ç›¸ï¼Œå®æœ‰ç§ä¹
- ä½“ç°äº†å¯¹å‘½è¿çš„æŠ—äº‰å’Œå¯¹ç­‰çº§åˆ¶åº¦çš„è´¨ç–‘ã€‚


### é»„å·¾èµ·ä¹‰

- è‹å¤©å·²æ­»ï¼Œé»„å¤©å½“ç«‹ï¼Œå²åœ¨ç”²å­ï¼Œå¤©ä¸‹å¤§å‰ã€‚â€å€Ÿå®—æ•™é¢„è¨€è¡¨è¾¾äº†æ¨ç¿»ä¸œæ±‰ç‹æœçš„å†³å¿ƒã€‚

### å¤ªå¹³å¤©å›½
- å¤©ä¸‹ä¸€å®¶ï¼ŒåŒäº«å¤ªå¹³
- ä½“ç°äº†å¤ªå¹³å¤©å›½è¿½æ±‚ç¤¾ä¼šå¹³ç­‰ã€äººäººå…±äº«å¤ªå¹³çš„ç†æƒ³ã€‚

	â€¢	â€œæ— å¤„ä¸å‡åŒ€ï¼Œæ— äººä¸é¥±æš–â€ï¼šå‡ºè‡ªã€Šå¤©æœç”°äº©åˆ¶åº¦ã€‹ï¼Œåæ˜ äº†å¯¹åœŸåœ°åˆ†é…å¹³ç­‰å’Œç”Ÿæ´»ä¿éšœçš„è¯‰æ±‚ã€‚

	â€¢	**â€œæ‰¶æ¸…ç­æ´‹â€**æ˜¯ä¹‰å’Œå›¢è¿åŠ¨çš„å£å·ï¼Œæ³¨æ„ä¸è¦æ··æ·†ã€‚å¤ªå¹³å¤©å›½çš„å£å·æ›´ä¾§é‡äºåå¯¹æ¸…æœç»Ÿæ²»å’Œå°å»ºå‰¥å‰Šï¼Œæ„å»ºç†æƒ³ä¸­çš„â€œå¤©å›½â€ç¤¾ä¼šã€‚

### è¯´èµ·æ¥é¡º

- é±¼è…¹è—ä¹¦
- ç¯ç«ç‹é¸£


### æ€»ç»“ğŸ¤”

- è¿™æ¬¡æˆ‘ä»¬ç»™ã€Šå…³é›ã€‹è°±äº†æ›²

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/4078549/uid1190679-20250518-1747528102472) 

- è¿˜çœ‹äº† ä¸Šå¤æ—¶ä»£ 
	- å°§èˆœç¦¹ çš„ å²è¯—
	- åˆ°äº† å¤§ç¦¹ æ—¶ä»£ 
	- å›½å®¶å°±å»ºç«‹èµ·æ¥äº†
- å…³äº å¤å•†å‘¨ çš„å»ºç«‹ 
	- æœ‰ä»€ä¹ˆ å²è¯— å—ï¼Ÿ
- ä¸‹æ¬¡å†è¯´ ğŸ‘‹